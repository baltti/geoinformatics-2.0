# Начало работы

## Добавление объектов на карту

В качестве первой работы построим и оформим карту супермаркетов в городе Санкт-Петербург.

Исходные данные для работы можно скачать по ссылке [здесь](https://drive.google.com/file/d/1LTFghQlrXeFDh5BI-hiZRBPbr6rzc7uw/view?usp=sharing)

Исходные данные были взяты с OpenStreetMap и сохранены в виде таблицы со следующими столбцами:

-   brand - название сети супермакетов;

-   lat - широта, градусы;

-   lon - долгота, градусы.

Для начала работы нужно запустить программу QGIS. После первого запуска вы увидите графический пользовательский интерфейс.

![](images/1-01.PNG)

В верхней части окна расположена строка меню и панель инструментов, в левой части сверху окно Браузер, в котором отображаются все доступные источники данных для работы, в левой нижней части окно Слои, где будут отображаться слои, загруженные в проект.

> Проект - совокупность всех слоев, стилей, макетов и прочего. Проекты позволяют сохранить конкретный сеанс работы.

Для того, чтобы добавить данные на карту воспользуемся строкой меню: **Слой --- Добавить слой --- Добавить слой из текста с разделителями.**

![](images/2-01.png)

После этого в диалоговом окне нужно задать параметры добавления объектов: имя слоя, вид разделителя, названия атрибутов, координаты точек, систему координат и прочее.

![](images/3-01.PNG)

В нашем случае в качестве координат точек выступают колонки *lat, lon*, а система координат необходима `EPSG:4326 - WGS 84` (про системы координат в ГИС будет отдельный раздел чуть дальше).

После добавления на карте должны появиться точки объектов

![](images/4-01.PNG)

## Добавление подложки

Для более понятной карты добавим на карту подложку OpenStreetMap. Это можно сделать двумя способами: через панель *Браузер* и с помощью плагина *QuickMapServices*.

Для того, чтобы добавить подложку из панели Браузер достаточно просто найти в ней `XYZTiles`, щелкнуть два раза, после чего раскроется список доступных тайлов (по умолчанию доступны только стандартные тайлы OpenStreetMap).

![](images/5-01.PNG)

> **Тайлы или тайловые карты** - это карта, отображаемая в веб-браузере путем бесшовного соединения десятков индивидуально запрашиваемых файлов изображений или векторных данных.
>
> Google Maps был одним из первых крупных картографических сайтов, использовавших эту технику. В первых плиточных веб-картах использовались растровые плитки, до появления векторных плиток.

Возможно нужно будет перетащить в перечне слоев подложку под слой с супермаркетами, чтобы она не перекрывала наши точки.

> По умолчанию слои отрисовываются в том порядке, в котором они расположены в перечне слоев. То есть слои, находящиеся в списке выше, будут отображаться поверх других слоев

Чтобы добавить подложку через плагин QuickMapServices нужно сначала его установить. Установка плагинов осуществляется через строку меню: **Модули --- Управление и установка модулей**.

В открывшемся окне через строку поиска нужно будет найти модуль по его названию и установить.

![](images/6-01.PNG)

После установки на панели инструментов появятся 3 значка ![](images/7.PNG){width="99"}.

Далее можно добавить стандартную подложку OpenStreetMap

![](images/8.png)

Установленный плагин позволяет добавлять не только стандартную подложку OSM, но и целый ряд других.

## Настройка карты

Глядя на нашу карту, мы заметим, что изображение выглядит непривычным для нас, как бы наклоненным. Это объясняется немного непривычной системой координат, в которой у нас создан проект и слой. Для изменения отображения карты, мы можем выполнить "перепроецирование на лету".

Для того, чтобы это сделать, необходимо в правом нижнем углу окна программы найти кнопку ![](images/9.png)

После ее нажатия открывается диалоговое окно с настройками системы координат

![](images/10.PNG)

Для того, чтобы сделать карту более привычной нам на вид выберем систему координат `EPSG:3857 - WGS 84 / Pseudo Mercator`. После изменения системы координат изображение должно "выровняться".

![](images/11.PNG)

> Важно помнить, что перепроецировании на лету не изменяются системы координат слоев, меняется только их отображение на экране.

Настроим стиль слоя. Для этого нужно открыть окно настроек либо двойным кликом левой кнопки мыши по названию слоя, либо в контекстном меню (открывается кликом правой кнопки мыши по названиб слоя) *Свойства*.

![](C:/Users/baltt/AppData/Local/RStudio/tmp/paste-373340B9.png)

При добавлении объектов они обозначаются простыми символами (*Обычный знак*), но возможен выбор других вариантов отображения объектов.

![](images/13.png)

-   уникальные значения - как правило, используется для категориальной или дискретной переменной с небольшим количеством значений;

-   градуированный знак - для задания символа в зависимости от числовой переменной;

-   правила - позволяет задавать символику на основе выражения;

-   смещение точек - позволяет показать все точки слоя, даже если они находятся в одном месте, возможны варианты смещения по кругу, концетрическим кругам и сетке;

-   point cluster - собирает близко расположенные точечные объекты в один;

-   создание теплокарт - создает динамическую карту плотности распределения объектов.

Для линейных и площадных объектов будут немного другие варианты, которые будут рассмотрены далее в курсе.

В нашем датасете есть фактически всего один атрибут, по которому мы можем настроить стиль символов - *brand*. Так как это категориальная переменная, следует использовать тип символа **Уникальные значения**. После выбора типа символа нужно выбрать **Значение** (атрибут, по которому будет задаваться символ) и нажать кнопку **Классифицировать**. После этого будет осуществлена автоматическая классификация по заданному атрибуту и отобразиться легенда слоя.

![](images/14.PNG)

При необходимости далее можно

-   нужную палитру или создать свою

![](images/15.png)

-   настроить символ - выбрать его размер, прозрачность, вращение, вид символа

![](images/16.png)

-   объединить или разъединить категории

![](images/17.png)

-   поменять название, под которым категория будет отображаться в легенде, для чего нужно дважды щелкнуть мышкой в конкретной категории в графе **Легенда** и ввести нужное название

Кроме того, можно изменять цвет и вид символа для отдельных категорий. Для этого достаточно дважды щелкнуть мышкой напротив символа конкретной категории.

После настройки стиля слоя под его названием появляется легенда, с помощью которой можно делать отдельные категории невидимыми (для этого достаточно убрать галочку в чекбоксе напротив названия категории).

![](images/18.PNG)

> **Задание**: самостоятельно настроить цвет и вид символов на карте по своему усмотрению
